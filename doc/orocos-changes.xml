<?xml version='1.0'?>

<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
"/usr/share/sgml/docbook/dtd/xml/4.1.2/docbookx.dtd" 
[
<!ENTITY cvs         "<acronym>CVS</acronym>">
<!ENTITY orocos      "<acronym>Orocos</acronym>">
<!ENTITY version     "0.20.0">
<!ENTITY rtai        "<acronym>RTAI</acronym>">
<!ENTITY rtos        "<acronym>RTOS</acronym>">
]
>

<article>
  <articleinfo>
    <title>
      Orocos &version; Release Series
      Changes, New Features, and Fixes 
    </title>
    <subtitle><emphasis>Open RObot COntrol Software</emphasis>
    </subtitle>
  </articleinfo>
  <para>
    This document provides a quick overview of what changed between Orocos 0.18.2 and
    Orocos 0.20.0. Hence, this release includes all bugfixes of the 0.18.x
    branch. If your application does not work, look here for
    possible causes and solutions. Also feature additions and improvements
    are documented.
  </para>
  <para>See also <ulink url="orocos-changes-0.18.1.html">what changed from 0.18.0 to 0.18.1</ulink>.</para>
  <para>See also <ulink url="orocos-changes-0.18.2.html">what changed from 0.18.1 to 0.18.2</ulink>.</para>
  <section id="caveats">
    <title>Caveats</title>
    <itemizedlist>
      <listitem>
	<para>
	  Some heavily deprecated header files have been removed or otherwise renamed.
	  The chance anyone was using them ( due to compile errors ) remains rather small though.
	</para>
      </listitem>
      <listitem>
	<para>
	  The BufferedControlKernel (and its header file) has been renamed to LockFreeControlKernel, possibly breaking
	  the build of your cascaded control applications. 
	</para>
      </listitem>
      <listitem>
	<para>
	  The HeartBeatGenerator has been renamed to the TimeService
	  (also its header file). Also, the
	  <emphasis>ticksGet()</emphasis> and <emphasis>secondsGet()</emphasis> functions are deprecated and renamed to
	  <emphasis>getTicks()</emphasis> and <emphasis>getSeconds()</emphasis>, for consistency.
	</para>
      </listitem>
      <listitem>
	<para>
	  The execution semantics of Programs (<classname>ProgramGraph</classname>) and Functions ( <classname>FunctionGraph</classname> )
	  in the <classname>Processor</classname> has changed. In previous versions, only one line at a time was executed in each 
	  Processor step(). Now, in a periodic step, as much program lines are executed as possible until a command is reached <emphasis>and</emphasis>
	  this command is not immediately done ( its completion condition returns <emphasis>false</emphasis> ). The next periodic step will
	  check if the command is done, and if so, execute again as much as possible <emphasis>etc</emphasis>. To introduce
	  a pause in your program, issue a <command>do nothing</command> command, which will act as a command which pauses your
	  program for one step, such that you can wait on changes in a while loop or similar.
	</para>
      </listitem>
    </itemizedlist>
  </section>
  <section id="general">
    <title>General Improvements</title>
    <itemizedlist>
      <listitem>
	<para> 
	  This release is more on code quality improvement than on feature addition. Focussing on
	  error detection/recovery and the overall Real-Time behaviour.
	</para>
      </listitem>
    </itemizedlist>
  </section>
  <section id="os">
    <title>OS Specific Improvements</title>
    <section>
      <title>All</title>
      <itemizedlist>
	<listitem>
	  <para>
	    The OS package was cleaned up to remove deprecated classes such as <classname>ConditionVariable</classname>
	    and <classname>EventInterrupt</classname> and related classes.
	  </para>
      </listitem>
    </itemizedlist>
    </section>
    <section>
      <title>Gnu/Linux</title>
      <itemizedlist>
	<listitem>
	  <para>
	    A race condition in <classname>PeriodicThread</classname> start()/stop() has been solved. It could lead
	    to finalize() being called before step() completed.
	  </para>
      </listitem>
    </itemizedlist>
    </section>
    <section>
      <title>LXRT</title>
      <itemizedlist>
	<listitem>
	  <para>
	    <classname>PeriodicThread</classname> stepping is a bit more efficient.
	  </para>
      </listitem>
	<listitem>
	  <para>
	    Orocos tries to find an alternative <emphasis>RTAI Name</emphasis> for its threads if the preconfigured one is already taken,
	    allowing to run multiple Orocos applications in parallel.
	  </para>
	</listitem>
    </itemizedlist>
    </section>
  </section>
  <section id="doc">
    <title>Documentation Improvements</title>
    <itemizedlist>
      <listitem>
	<para>
	  The main manual now contains a version number.
	</para>
      </listitem>
      <listitem>
	<para>
	  A Logging section has been added to the CoreLib Manual. Small updates
	  in the ControlKernel Manual wrt ReportingExtension and PropertyExtension.
	</para>
      </listitem>
      <listitem>
	<para>
	  DataObject documentation has been moved to the CoreLib Manual.
	</para>
      </listitem>
      <listitem>
	<para>
	  A Priority Inversions section was added to the Corelib Manual.
	</para>
      </listitem>
    </itemizedlist>
  </section>
  <section id="corelib">
    <title>CoreLib Improvements</title>
    <itemizedlist>
      <listitem>
	<para>
	  A Logging framework has been implemented in the <classname>ORO_CoreLib::Logger</classname>
	  class. This feature should enable tracing and debugging your application much better.
	  See the CoreLib Manual and API for details. Every Orocos user will be able to
	  track application progress in an automatically generated <filename>orocos.log</filename> file.
	</para>
      </listitem>
      <listitem>
	<para>
	  The CPFDemarshaller has improved error detection and logging. This has especially
	  effect on the ControlKernel PropertyExtension.
	</para>
      </listitem>
      <listitem>
	<para>
	  DataObjects have been moved into the CoreLib's namespace (from ControlKernel) and are now
	  usable to all application types.
	</para>
      </listitem>
      <listitem>
	<para>
	  Asynchonous Event callbacks may choose the <emphasis>policy</emphasis> of which data
	  they get on event firing overruns. On overruns, the asynchronous callback will only 
	  be called once. The default policy is to provide the arguments of the first fire() call,
	  but it can be changed ( at a slight performance cost ) to contain the arguments of the
	  last fire() call during the overrun. See the CoreLib manual for more information.
	</para>
      </listitem>
      <listitem>
	<para>
	  A new kind of Buffer, <classname>BufferLockFree</classname> has been
	  added to provide a non blocking, many readers, many writers realtime FIFO queue.
	  The existing buffers (Circular and Simple) have been revised but remain experimental.
	</para>
      </listitem>
      <listitem>
	<para>
	  The Periodic Task infrastructure has been completely refactored to allow hard realtime
	  start/stop of periodic tasks. A start() is O(1) time, a stop() is O(n) time, bounded by the
	  number of tasks with that period. Also, task execution efficiency has improved 'a lot',
	  reducing the Orocos layer overhead.
	</para>
      </listitem>
      <listitem>
	<para>
	  The time conversion algorithms in Orocos have had a code review and extra test suite
	  to validate and guarantee time keeping and conversion correctness.
	</para>
      </listitem>
    </itemizedlist>
  </section>
  <section id="control">
    <title>Control Kernel and Components Improvements</title>
    <itemizedlist>
      <listitem>
	<para>
	  The Reporting extension has been extended with a start() and a 
	  stop() script method which can trigger reporting from your program
	  scripts. ( <command>do Reporter.start()</command> or
	  <command>do Reporter.stop()</command> )
	</para>
      </listitem>
      <listitem>
	<para>
	  The PropertyExtension is far more robust against and informative about
	  missing or malformed configuration files. Also, if no configuration
	  file is listed, it tries to configure the components with an empty
	  PropertyBag. This can be overriden with setting 'IgnoreMissingFiles'
	  to 1.
	</para>
      </listitem>
      <listitem>
	<para>
	  The PropertyExtension has implemented the 'SaveProperties' property flag
	  which enables a write out of the properties of each component to a file.
	</para>
      </listitem>
    </itemizedlist>
  </section>
  <section id="program">
    <title>Program Processor and Parser Improvements</title>
    <itemizedlist>
      <listitem>
	<para>
	  The <classname>Parser</classname> class can now also parse local files, instead
	  of just an <classname>istream</classname>.
	</para>
      </listitem>
      <listitem>
	<para>
	  The scripting language now also supports the <classname>Twist</classname> and
	  <classname>Wrench</classname> classes, in addition to the existing <classname>Vector</classname>,
	  <classname>Rotation</classname> and <classname>Frame</classname> classes. The
	  types are written non-capital in the scripting language.
	</para>
      </listitem>
    </itemizedlist>
  </section>
  <section id="interfacing">
    <title>Interfacing Improvements</title>
    <itemizedlist>
      <listitem>
	<para>
	  KernelClient version 0.4 has been released to take advantage
	  of the new logging infrastructure (locally and remotely).
	  Furthermore, a shutdown command is available to shutdown the 
	  server process (ie remote kernel).
	</para>
      </listitem>
    </itemizedlist>
  </section>

  <appendix>
    <title>About Orocos</title>
    <para>
      Please send general, non technical, Orocos questions to <ulink
	url="mailto:orocos@mail.mech.kuleuven.ac.be">
	orocos@mail.mech.kuleuven.ac.be </ulink>. 
    </para>
    <para>
      These pages are maintained by <ulink
	url="http://www.orocos.org/about.php">the Orocos
	team</ulink>.
    </para>
    <para>
      For questions related to the use of the Orocos Software, please consult these
      web pages and the <ulink
	url="http://www.orocos.org/documentation.php">Orocos manuals</ulink>. If
      that fails, the  <ulink
	url="mailto:orocos-dev@mail.mech.kuleuven.ac.be">
	orocos-dev@mail.mech.kuleuven.ac.be </ulink> mailing list might help.
      Please
      send comments on these web pages and the development of Orocos to
      our developer mailing list at  <ulink
	url="mailto:orocos-dev@mail.mech.kuleuven.ac.be">
	orocos-dev@mail.mech.kuleuven.ac.be </ulink>. All of
      our lists have <ulink url="http://mail.mech.kuleuven.ac.be/mailman/listinfo/orocos">public
	archives</ulink> ( <ulink url="http://mail.mech.kuleuven.ac.be/mailman/listinfo/orocos-dev"> dev public
	archive</ulink> ) .
      </para>
    <para>
      Copyright (C) Peter Soetens
    </para>
    <para>
      Verbatim copying and distribution of this entire article is
      permitted in any medium, provided this notice is preserved.
    </para>
  </appendix>
</article>
