
INCLUDE (${PROJ_SOURCE_DIR}/config/TaoIDL.cmake)

OPTION(OROINT_OS_CORBA "Enable CORBA (using TAO)" ON)

IF(OROINT_OS_CORBA)

#  EXEC_PROGRAM(tao_idl ARGS)
  FILE( GLOB IDLS [^.]*.idl )
  FILE( GLOB CPPS [^.]*.cpp )
  FILE( GLOB HPPS [^.]*.hpp [^.]*.h [^.]*.inl)

  ORO_ADD_CORBA_SERVERS(CPPS HPPS ${IDLS} )
  SET( ENV{GLOBAL_GENERATED_SRCS} "${CPPS}" )
  #MESSAGE("CPPS: $ENV{GLOBAL_GENERATED_SRCS}")
  #MESSAGE("HPPS: ${HPPS}")
  GLOBAL_ADD_INCLUDE( rtt/corba ${HPPS})
  #GLOBAL_ADD_SRC( ${CPPS} )
  INCLUDE_DIRECTORIES( ${CMAKE_CURRENT_BINARY_DIR} )
  INCLUDE_DIRECTORIES( ${CMAKE_CURRENT_SOURCE_DIR}/.. )
  INCLUDE_DIRECTORIES( ${CMAKE_CURRENT_BINARY_DIR}/.. )

  ADD_LIBRARY(orocos-rtt-corba SHARED ${CPPS})
  INSTALL_TARGETS(/lib orocos-rtt-corba)

ENDIF(OROINT_OS_CORBA)