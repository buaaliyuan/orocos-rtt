
.PHONY: db clean etags configure

etags:
	-etags $$(find . -name "*.hpp" -o -name *.cxx -o -name "*.h" -o -name *.c )
	-ebrowse $$(find . -name "*.hpp" -o -name *.cxx -o -name "*.h" -o -name *.c )

db: configure
	@find support -name "*.cdl" | xargs rm -f
	@cd @PKG_BLD_DIR@; ./config.status; cd -
	@echo "Generating ecos.db file ..."
	@rm -f ecos.db
	@touch ecos.db
	@python ecosdbgen.py > pkgadd.db
	@if [ -f ecos.db.in ]; then cat ecos.db.in >> pkgadd.db; fi
	@tar -czf support.epk pkgadd.db
	@./ecosadmin.tcl add support.epk
	@rm -f support.epk pkgadd.db

configure: acinclude.m4 configure.ac
	./autogen.sh
	cd @PKG_BLD_DIR@; ./config.status --recheck; cd -

clean:
	@echo "Cleaning up..."
	rm -f support.epk pkgadd.db
	find support -name "*.cdl" | xargs rm -f
	rm -f ecos.db

