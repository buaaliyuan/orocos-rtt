
db:
	@find support -name "*.cdl" | xargs rm -f
	@./config.status
	@echo "Generating ecos.db file ..."
	@touch ecos.db
	@python ecosdbgen.py >> pkgadd.db
	@if [ -f ecos.db.in ]; then cat ecos.db.in >> pkgadd.db; fi
	@tar -czf support.epk pkgadd.db
	@./ecosadmin.tcl add support.epk
#@rm support.epk

clean:
	@echo "Cleaning up..."
	rm -f support.epk pkgadd.db
	find support -name "*.cdl" | xargs rm -f
	rm -f ecos.db

orocos-dist: doc-dist

doc-dist:
	@echo "Making doc tarballs..."
	@for i in $$(find . -name Makefile); do make -C $$(dirname $$i) dist; done
	@find . -name "*.eps" -o -name "*.pdf" -o -name "*.ps" | xargs rm
	@rm -rf orocos-docs
	@mkdir  orocos-docs
	@echo "Copying..."
	@mv  $$(find . -name "*.tgz") orocos-docs
	@(cd orocos-docs; tar -cf ../orocos-docs.tar *.tgz; )
	@echo "Done !"

html-dist:
	@echo "Making html docs..."
	@for i in $$(find . -name Makefile); do make dochtml -C $$(dirname $$i); done

doxy-dist:
	@echo "Running Configure..."
	@./configure >/dev/null || (echo "./configure failed!" ; exit 1)
	@echo "Running Doxygen... (warnings in doxygen.warnings)"
	@doxygen >/dev/null || (echo "doxygen failed !" ; exit 1)
	@if [ -d doc ] ; then echo "Tarring API docs..." ;\
	tar -cjf orocos-api.tar.bz2 doc; fi

